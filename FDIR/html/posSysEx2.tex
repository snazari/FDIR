
% This LaTeX was auto-generated from MATLAB code.
% To make changes, update the MATLAB code and republish this document.

\documentclass{article}
\usepackage{graphicx}
\usepackage{color}

\sloppy
\definecolor{lightgray}{gray}{0.5}
\setlength{\parindent}{0pt}

\begin{document}

    
    
\subsection*{Contents}

\begin{itemize}
\setlength{\itemsep}{-1ex}
   \item Unknown Input Observer Dynamic System Matricies
   \item Step one: Check rank
   \item Step two: Compute Observer Matricies
   \item Step three: check observability
   \item Pole Placement
   \item Finish observer design
   \item Simulation results
   \item Sim the system
   \item Plot the results
\end{itemize}


\subsection*{Unknown Input Observer Dynamic System Matricies}

\begin{par}
Sam Nazari April 2015 This example is form the book: Robust Model Based Fault Diagnosis for Dynamic Systems by J. Chen Please see the associated ShareLaTeX pdf file "UIO and Examples"
\end{par} \vspace{1em}
\begin{verbatim}
clear
clc
A = [-1 1;0 -2];
B = [0;1];
C = [1 0;0 1];
D = 0;
E = [0;1];
\end{verbatim}


\subsection*{Step one: Check rank}

\begin{par}
We check to see if the rank(CE) = rank(E) = 1
\end{par} \vspace{1em}
\begin{verbatim}
rank(C*E)
rank(E)
\end{verbatim}

        \color{lightgray} \begin{verbatim}
ans =

     1


ans =

     1

\end{verbatim} \color{black}
    

\subsection*{Step two: Compute Observer Matricies}

\begin{par}
Since we have no issues in the previous step, let us compute the observer matrices now:
\end{par} \vspace{1em}
\begin{verbatim}
H = E*inv((C*E)'*(C*E))*(C*E)'
T = eye(2)-H*C
A1 = T*A
\end{verbatim}

        \color{lightgray} \begin{verbatim}
H =

     0     0
     0     1


T =

     1     0
     0     0


A1 =

    -1     1
     0     0

\end{verbatim} \color{black}
    

\subsection*{Step three: check observability}

\begin{par}
We must check the system A1,C observability
\end{par} \vspace{1em}
\begin{verbatim}
rank(obsv(A1,C))
\end{verbatim}

        \color{lightgray} \begin{verbatim}
ans =

     2

\end{verbatim} \color{black}
    

\subsection*{Pole Placement}

\begin{par}
Pole placement is used to assign the observer poles
\end{par} \vspace{1em}
\begin{verbatim}
K1 = [0 0;0 2]
%K1 = [0 0;1/2 0;0 1/2]
\end{verbatim}

        \color{lightgray} \begin{verbatim}
K1 =

     0     0
     0     2

\end{verbatim} \color{black}
    

\subsection*{Finish observer design}

\begin{par}
Finally, the F and K matricies are computed
\end{par} \vspace{1em}
\begin{verbatim}
F = A1-K1*C
K = K1 + F*H
eig(F)
\end{verbatim}

        \color{lightgray} \begin{verbatim}
F =

    -1     1
     0    -2


K =

     0     1
     0     0


ans =

    -1
    -2

\end{verbatim} \color{black}
    

\subsection*{Simulation results}

\begin{par}
Set up simulation initial condiditons
\end{par} \vspace{1em}
\begin{verbatim}
x1_0 = 0.5;
x2_0 = 1;

d = 10;
TSIM = 20;
\end{verbatim}


\subsection*{Sim the system}

\begin{verbatim}
sim('posSysEx2MDL')
\end{verbatim}

        \color{lightgray} \begin{verbatim}Warning: Input port 1 of 'posSysEx2MDL/UIO' is not connected. 
Warning: Input port 1 of 'posSysEx2MDL/dynamics' is not connected. 
\end{verbatim} \color{black}
    

\subsection*{Plot the results}

\begin{verbatim}
figure(1)
plot(tout,Xerr(:,1),'b'),hold on
plot(tout,Xerr(:,2),'g'),hold on
 xlabel('Time in seconds'),ylabel('State Estimate Error')
title('Positive Dynamic System and Positive UIO Observer State Estimation Error')
\end{verbatim}

\includegraphics [width=4in]{posSysEx2_01.eps}



\end{document}
    
